Generated Files
===============

In this section, we will review the different files that are generated by the algorithm, and at the end of which step. Note that for the moment, the code is not meant to be really flexible, but please be in touch if you want to know more about its complete work flow. In all the following, we will assume that the data are ``path/mydata.extension``. All data are generated in the path ``path/mydata/``. TO know more about what is performed during the different steps of the algorithm, please see :doc:`Configuration of MPI <../advanced/algorithm>`.

Whitening
---------

At the end of that step, several files are produced:
    * ``mydata.thresholds.npy`` A numpy_ file with the *N* thresholds, for all *N* electrodes. Note that values are positive, and should be multiply by the threshold parameter in the configuration file (see :doc:`Configuration of MPI <../code/config>`)
    * ``mydata.whitening.mat`` A MATLAB_ (or HDF5_) file storing the spatial matrix and the temporal filter that are used for whitening the data
    * ``mydata.basis.npz`` A numpy_ file storing the projection matrix for the PCA, and also its inverse.

Clustering
----------

At the end of that step, several files are produced:
    * ``mydata.clusters.mat`` A MATLAB_ file that will encapsulates a lot of informations about the clusters, for every electrodes. What were the points selected, the spike times of those points, what was the labels assigned by the clustering, and also the rho and delta values resulting of the clustering algorithm used `[Rodriguez et Laio, 2014] <http://www.sciencemag.org/content/344/6191/1492.short>`_
    * ``mydata.templates.mat`` A MATLAB_ file storing all the templates, and also their orthogonal projections. So this matrix has a size that is twice the number of templates. Only the first *k* elements are the real templates.
    * ``mydata.amplitudes.mat`` 
    * ``mydata.overlap.mat`` A MATLAB_ file only used by the GUI, storing the similarities between all pairs of templates.
    * ``mydata.overlap.hdf5`` A HDF5_ file used internally during the fitting procedure. This file can be pretty big.

Fitting
-------

At the end of that step, several files are produced:
    * ``mydata.spiketimes.mat`` A MATLAB_ file that contains, for all templates, the times at which it has been fitted.
    * ``mydata.amplitudes.mat`` A MATLAB_ file that contains, for all the templates, the amplitudes used at the given spike times. Note that those amplitudes has two component, but only the first one is relevant. The second one is the template of the orthogonal template.


Converting
----------

At the end of that step, several files are produced:
    * ``mydata.kwx`` A phy_ file that can used for visualization


.. _MATLAB: http://fr.mathworks.com/products/matlab/
.. _phy: https://github.com/kwikteam/phy
.. _numpy: http://www.numpy.org/
.. _HDF5: https://www.hdfgroup.org/HDF5/