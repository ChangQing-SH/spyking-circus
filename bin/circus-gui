#!/usr/bin/env python
import os
import sys
import subprocess
import pkg_resources

gui_file = pkg_resources.resource_filename('circus', 'matlab_GUI/SortingGUI.m')
# Change to the directory of the matlab file
os.chdir(os.path.abspath(os.path.dirname(gui_file)))

# Use quotation marks for string arguments
is_string = [False, True, True, True, False, True, False, False]
arguments = ', '.join(["'%s'" % arg if s else "%s" % arg
                       for arg, s in zip(sys.argv[1:], is_string)])
matlab_command = 'SortingGUI(%s)' % arguments

sys.exit(subprocess.call(['matlab',
                          '-nodesktop',
                          '-nosplash',
                          '-r', matlab_command]))
